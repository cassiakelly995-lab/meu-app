<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>GESTOR V9 ELITE</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <style>
        body { background: #000; color: #fff; font-family: sans-serif; text-align: center; padding: 20px; }
        .card { border: 2px solid #ed0b5a; padding: 30px; border-radius: 20px; max-width: 500px; margin: auto; box-shadow: 0 0 20px rgba(237,11,90,0.2); }
        h1 { text-transform: uppercase; color: #ed0b5a; letter-spacing: 2px; }
        input { width: 90%; padding: 15px; margin: 15px 0; background: #111; border: 1px solid #333; color: #fff; border-radius: 10px; font-size: 15px; }
        .btn-gerar { background: #ed0b5a; color: #fff; border: none; padding: 15px; width: 95%; border-radius: 10px; font-weight: bold; cursor: pointer; text-transform: uppercase; font-size: 14px; }
        .item { background: #111; padding: 15px; border-radius: 10px; margin-top: 15px; border: 1px solid #222; text-align: left; }
        .item-nome { font-weight: 800; font-size: 13px; letter-spacing: 1px; color: #fff; }
        .item-id { font-size: 10px; color: #555; margin-top: 3px; }
        .btn-copiar { background: #007bff; color: #fff; border: none; padding: 10px; width: 100%; border-radius: 5px; cursor: pointer; margin-top: 10px; font-weight: bold; font-size: 12px; }
        .btn-revogar { background: none; border: 1px solid #ff4d4d; color: #ff4d4d; padding: 5px 12px; cursor: pointer; border-radius: 5px; float: right; font-size: 10px; font-weight: bold; }
        .status-ok { display: inline-block; background: rgba(82,196,82,0.15); color: #52c452; border: 1px solid #52c452; border-radius: 4px; font-size: 9px; padding: 2px 8px; margin-left: 8px; font-weight: 800; letter-spacing: 1px; }
        .status-fixo { display: inline-block; background: rgba(191,149,63,0.15); color: #bf953f; border: 1px solid #bf953f; border-radius: 4px; font-size: 9px; padding: 2px 8px; margin-left: 8px; font-weight: 800; letter-spacing: 1px; }
        .total { font-size: 11px; color: #555; margin-top: 20px; letter-spacing: 1px; }
        footer { margin-top: 40px; font-size: 10px; color: #666; }
        #msg { font-size: 12px; color: #52c452; height: 20px; margin-top: 8px; font-weight: bold; letter-spacing: 1px; }
    </style>
</head>
<body>
<div class="card">
    <h1>Gestor <span style="color:#fff">V9 Elite</span></h1>
    <input type="text" id="nomeDoutora" placeholder="NOME DA PESSOA">
    <button class="btn-gerar" onclick="gerarAcesso()">GERAR LINK E AUTORIZAR</button>
    <div id="msg"></div>
    <div id="listaAcessos"></div>
    <div class="total" id="total"></div>
    <footer>
        <strong style="color:#bf953f">LICENCIADO PARA: C√ÅSSIA PROMPT</strong><br><br>
        A RESPONSABILIDADE √â DE QUEM EST√Å USANDO.<br>ESTE PROGRAMA APENAS GERA O PROMPT.
    </footer>
</div>
<script>
    const firebaseConfig = { databaseURL: "https://promptv25-default-rtdb.firebaseio.com" };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();
    const BASE_URL = "https://cassiakelly995-lab.github.io/meu-app/v25.html";
    const FIXOS = ["Helen_cristina"];

    function showMsg(txt, cor) {
        const el = document.getElementById('msg');
        el.style.color = cor || '#52c452';
        el.innerText = txt;
        setTimeout(() => el.innerText = '', 2500);
    }

    function renderizar(acessos) {
        const lista = document.getElementById('listaAcessos');
        const total = document.getElementById('total');
        lista.innerHTML = '';
        const keys = Object.keys(acessos || {});
        keys.forEach(id => {
            const acc = acessos[id];
            const ehFixo = FIXOS.includes(id);
            lista.innerHTML += `
                <div class="item">
                    <span class="item-nome">${acc.nome}</span>
                    ${ehFixo ? '<span class="status-fixo">FIXO</span>' : '<span class="status-ok">ATIVO</span>'}
                    ${ehFixo ? '' : `<button class="btn-revogar" onclick="revogar('${id}', '${acc.nome}')">REVOGAR</button>`}
                    <div class="item-id">ID: ${id}</div>
                    <button class="btn-copiar" onclick="copiar('${id}')">üìã COPIAR LINK</button>
                </div>`;
        });
        total.innerText = `ACESSOS ATIVOS: ${keys.length}`;
    }

    db.ref('acessos_v9').on('value', snap => {
        const dados = snap.val() || {};
        if (!dados['Helen_cristina']) {
            db.ref('acessos_v9/Helen_cristina').set({ nome: 'HELEN CRISTINA', criadoEm: Date.now() });
        }
        renderizar(dados);
    });

    function gerarAcesso() {
        const nome = document.getElementById('nomeDoutora').value.trim().toUpperCase();
        if (!nome) { showMsg('DIGITE O NOME!', '#ff4d4d'); return; }
        const id = btoa(nome + Date.now()).replace(/[^a-zA-Z0-9]/g,'').substring(0, 10);
        db.ref('acessos_v9/' + id).set({ nome, criadoEm: Date.now() })
            .then(() => {
                document.getElementById('nomeDoutora').value = '';
                showMsg('ACESSO GERADO COM SUCESSO!');
            });
    }

    function revogar(id, nome) {
        if (confirm(`Revogar acesso de ${nome}? Ela ser√° bloqueada imediatamente.`)) {
            db.ref('acessos_v9/' + id).remove()
                .then(() => showMsg('ACESSO REVOGADO!', '#ff4d4d'));
        }
    }

    function copiar(id) {
        const link = BASE_URL + '?id=' + id;
        if (navigator.clipboard && navigator.clipboard.writeText) {
            navigator.clipboard.writeText(link).then(() => showMsg('LINK COPIADO!'));
        } else {
            const el = document.createElement('textarea');
            el.value = link;
            document.body.appendChild(el);
            el.select();
            document.execCommand('copy');
            document.body.removeChild(el);
            showMsg('LINK COPIADO!');
        }
    }
</script>
</body>
</html>
