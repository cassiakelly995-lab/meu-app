<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cássia Prompt V8 | Singularity Ultra</title>
    
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>

    <style>
        :root {
            --brand: #0078d4;
            --bg: #f8f9fa;
            --card: #ffffff;
            --text: #201f1e;
            --accent: #e1dfdd;
        }

        [data-theme="dark"] {
            --bg: #111111;
            --card: #1b1b1b;
            --text: #ffffff;
            --accent: #323130;
        }

        body {
            font-family: 'Segoe UI Variable', 'Segoe UI', sans-serif;
            background-color: var(--bg);
            color: var(--text);
            margin: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            transition: 0.3s ease;
        }

        .header-bar {
            width: 100%;
            background: var(--card);
            padding: 15px 50px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid var(--accent);
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        .main-container {
            width: 95%;
            max-width: 1000px;
            margin: 50px 0;
            background: var(--card);
            padding: 40px;
            border-radius: 12px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
        }

        .v8-title {
            font-size: 2rem;
            font-weight: 800;
            background: linear-gradient(90deg, var(--brand), #00bcf2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }

        .status-pill {
            display: inline-block;
            padding: 4px 12px;
            background: #dff6dd;
            color: #107c10;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
            margin-bottom: 30px;
        }

        .input-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 25px;
        }

        .group { display: flex; flex-direction: column; }
        label { font-size: 0.8rem; font-weight: 700; color: var(--brand); text-transform: uppercase; margin-bottom: 8px; }

        input, textarea {
            background: var(--bg);
            color: var(--text);
            border: 1px solid var(--accent);
            padding: 15px;
            border-radius: 8px;
            font-size: 1rem;
            outline: none;
            transition: 0.2s;
        }

        input:focus, textarea:focus { border: 2px solid var(--brand); box-shadow: 0 0 10px rgba(0,120,212,0.1); }

        textarea { height: 250px; resize: none; }

        .btn-v8 {
            background: var(--brand);
            color: white;
            border: none;
            padding: 18px 40px;
            border-radius: 8px;
            font-weight: 700;
            cursor: pointer;
            width: 100%;
            margin-top: 20px;
            transition: 0.3s;
        }

        .btn-v8:hover { background: #005a9e; transform: translateY(-2px); }

        #output {
            margin-top: 40px;
            padding: 25px;
            background: var(--bg);
            border-radius: 8px;
            border-left: 5px solid var(--brand);
            display: none;
        }

        .lock-screen {
            position: fixed; inset: 0; background: white; z-index: 1000;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
        }
    </style>
</head>
<body>

<div id="appContainer">
    <nav class="header-bar">
        <div style="font-weight: 900; letter-spacing: -1px;">CÁSSIA<span style="color: var(--brand);">PROMPT</span></div>
        <button onclick="document.documentElement.toggleAttribute('data-theme')" style="background:none; border:1px solid var(--accent); color:var(--text); padding:5px 15px; border-radius:5px; cursor:pointer;">Alternar Tema</button>
    </nav>

    <div class="main-container">
        <div class="v8-title">Singularity Ultra Edition</div>
        <div class="status-pill">PROTOCOL V8 ACTIVE | ZERO HALLUCINATION MODE</div>

        <div class="input-grid">
            <div class="group">
                <label>Arquitetura da Persona</label>
                <input type="text" id="persona" placeholder="Ex: Advogado Especialista em Direito Civil">
            </div>
            <div class="group">
                <label>Matriz de Objetivo</label>
                <input type="text" id="objetivo" placeholder="Ex: Contestação com Foco em Nulidade">
            </div>
        </div>

        <div class="group">
            <label>Núcleo de Fatos (Corpus)</label>
            <textarea id="corpus" placeholder="Insira aqui os elementos do caso. O Protocolo V8 eliminará qualquer conteúdo irrelevante..."></textarea>
        </div>

        <button class="btn-v8" onclick="gerarV8()">EXECUTAR ENGENHARIA SINGULARITY</button>

        <div id="output">
            <label style="color: var(--brand);">Script de Alta Performance Gerado:</label>
            <div id="result" style="white-space: pre-wrap; margin-top: 15px; font-size: 0.95rem; line-height: 1.6;"></div>
            <button class="btn-v8" style="background:#201f1e; font-size: 0.8rem;" onclick="copiar()">COPIAR SCRIPT</button>
        </div>
    </div>
</div>

<script>
    // FIREBASE SECURITY
    const firebaseConfig = { databaseURL: "https://cassiapromptv8-default-rtdb.firebaseio.com/" };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    const id = new URLSearchParams(window.location.search).get('id');

    if (!id) {
        document.body.innerHTML = '<div class="lock-screen"><h1>Cássia Prompt V8</h1><p>Erro: ID de licenciamento ausente.</p></div>';
    } else {
        db.ref('clientes/' + id).on('value', (snap) => {
            if (!snap.val() || snap.val().status !== "ativo") {
                document.body.innerHTML = '<div class="lock-screen"><h1>⚠️ ACESSO REVOGADO</h1><p>Contacte <b>Cássia Prompt V8</b> para renovar sua licença.</p></div>';
            }
        });
    }

    function gerarV8() {
        const p = document.getElementById('persona').value || "Especialista Jurídico";
        const o = document.getElementById('objetivo').value || "Máxima Eficácia Técnica";
        const c = document.getElementById('corpus').value;

        if(!c) return alert("Erro: O Corpus está vazio.");

        const script = `[SISTEMA: CÁSSIA PROMPT V8 - SINGULARITY ULTRA]
PERSONA: ${p}.
OBJETIVO: ${o}.

[RESTRIÇÕES RÍGIDAS - CONTROLE DE QUALIDADE]
1. PROIBIDO: Introduções genéricas, "babozeiras" sociais ou termos como "espero que isso ajude". Vá direto ao ponto.
2. ZERO ALUCINAÇÃO: Não invente fatos, leis, jurisprudência ou detalhes que não constem no corpus. 
3. LACUNAS: Se faltar um dado crucial para a peça, escreva "[DADO AUSENTE: SOLICITAR AO ADVOGADO]".
4. TÉCNICA: Use linguagem jurídica de alto nível, focada em convencimento magistral.

CORPUS:
"${c}"

EXECUTE AGORA NO MODO SINGULARITY.`;

        document.getElementById('result').innerText = script;
        document.getElementById('output').style.display = 'block';
    }

    function copiar() {
        navigator.clipboard.writeText(document.getElementById('result').innerText);
        alert("Script copiado com sucesso!");
    }
</script>
</body>
</html>
