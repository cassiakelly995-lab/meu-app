<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>C√°ssia Prompt V8 | Enterprise Singularity</title>
    
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.4.120/pdf.min.js"></script>

    <style>
        :root {
            --ms-blue: #0078d4;
            --ms-bg: #f3f2f1;
            --ms-card: #ffffff;
            --ms-text: #323130;
            --ms-border: #edebe9;
        }

        [data-theme="dark"] {
            --ms-bg: #0b0b0b;
            --ms-card: #161616;
            --ms-text: #f5f5f5;
            --ms-border: #2d2d2d;
        }

        body {
            font-family: 'Segoe UI', system-ui, sans-serif;
            background-color: var(--ms-bg);
            color: var(--ms-text);
            margin: 0;
            transition: background 0.3s, color 0.3s;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        .nav-enterprise {
            background: var(--ms-card);
            padding: 15px 40px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid var(--ms-border);
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }

        .main-app {
            flex: 1;
            width: 90%;
            max-width: 1050px;
            margin: 40px auto;
            background: var(--ms-card);
            padding: 40px;
            border-radius: 4px;
            border: 1px solid var(--ms-border);
            box-shadow: 0 10px 30px rgba(0,0,0,0.05);
        }

        .v8-accent-title {
            font-size: 2.2rem;
            font-weight: 700;
            letter-spacing: -1px;
            color: var(--ms-blue);
            margin: 0;
        }

        .pdf-drop-zone {
            margin: 30px 0;
            padding: 30px;
            border: 2px dashed var(--ms-blue);
            background: rgba(0, 120, 212, 0.03);
            text-align: center;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: 0.2s;
        }

        .pdf-drop-zone:hover { background: rgba(0, 120, 212, 0.08); }

        .form-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
            margin-top: 25px;
        }

        label { display: block; font-size: 0.75rem; font-weight: 700; text-transform: uppercase; color: var(--ms-blue); margin-bottom: 8px; }

        input, textarea {
            width: 100%;
            background: var(--ms-bg);
            color: var(--ms-text);
            border: 1px solid var(--ms-border);
            padding: 15px;
            border-radius: 4px;
            box-sizing: border-box;
            font-size: 1rem;
            outline: none;
        }

        textarea { height: 300px; resize: vertical; }

        .btn-execute {
            background: var(--ms-blue);
            color: #fff;
            border: none;
            padding: 20px;
            width: 100%;
            font-weight: 700;
            font-size: 1rem;
            border-radius: 4px;
            cursor: pointer;
            margin-top: 25px;
            text-transform: uppercase;
        }

        #outputArea {
            margin-top: 40px;
            padding: 30px;
            background: var(--ms-bg);
            border-left: 6px solid var(--ms-blue);
            display: none;
        }

        .footer-legal-block {
            background: var(--ms-card);
            padding: 40px;
            font-size: 0.75rem;
            color: #707070;
            text-align: center;
            border-top: 1px solid var(--ms-border);
            line-height: 1.6;
        }

        .btn-theme {
            background: var(--ms-blue);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 600;
        }
    </style>
</head>
<body>

<nav class="nav-enterprise">
    <div style="font-weight: 800; font-size: 1.4rem;">C√ÅSSIA<span style="color:var(--ms-blue)">PROMPT</span> V8</div>
    <button class="btn-theme" onclick="toggleMode()">ALTERNAR TEMA</button>
</nav>

<div class="main-app">
    <h1 class="v8-accent-title">Singularity Enterprise</h1>
    <p style="margin-bottom: 30px; opacity: 0.7;">Engine de Alta Performance Jur√≠dica</p>

    <div class="pdf-drop-zone" onclick="document.getElementById('pdfIn').click()">
        üìÅ CLIQUE PARA IMPORTAR PDF (EXTRATA√á√ÉO LOCAL LGPD)
        <input type="file" id="pdfIn" hidden accept="application/pdf" onchange="extractPDF(this)">
    </div>

    <div class="form-grid">
        <div class="group">
            <label>Defini√ß√£o de Persona</label>
            <input type="text" id="persona" placeholder="Ex: Advogado S√™nior Especialista">
        </div>
        <div class="group">
            <label>Objetivo do Script</label>
            <input type="text" id="objetivo" placeholder="Ex: Contesta√ß√£o Estrat√©gica">
        </div>
    </div>

    <div style="margin-top: 25px;">
        <label>Corpus Jur√≠dico (Dados do Caso)</label>
        <textarea id="corpus" placeholder="Aguardando dados..."></textarea>
    </div>

    <button class="btn-execute" onclick="runV8()">Executar Protocolo Singularity</button>

    <div id="outputArea">
        <label>Comando de Elite Gerado:</label>
        <div id="result" style="white-space: pre-wrap; font-family: monospace; margin-top: 15px;"></div>
        <button class="btn-execute" style="background: #333; margin-top: 20px;" onclick="copyResult()">Copiar Script</button>
    </div>
</div>

<footer class="footer-legal-block">
    <strong>ISEN√á√ÉO DE RESPONSABILIDADE JUR√çDICA E LGPD:</strong><br>
    Este sistema √© uma ferramenta de engenharia de prompt de processamento local. NENHUM dado √© armazenado ou enviado para nuvem. 
    A desenvolvedora <strong>C√°ssia Prompt V8</strong> N√ÉO se responsabiliza pelo uso final, decis√µes jur√≠dicas ou consequ√™ncias decorrentes dos scripts gerados. 
    A valida√ß√£o da resposta da IA √© de inteira e exclusiva responsabilidade do advogado consulente. 
    Protocolo Anti-Babozeira e Zero Alucina√ß√£o ativado por padr√£o.
</footer>

<script>
    // FIREBASE
    const firebaseConfig = { databaseURL: "https://cassiapromptv8-default-rtdb.firebaseio.com/" };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();
    const id = new URLSearchParams(window.location.search).get('id');

    if (!id) {
        document.body.innerHTML = '<div style="text-align:center; padding:100px;"><h1>ACESSO NEGADO</h1></div>';
    } else {
        db.ref('clientes/' + id).on('value', (s) => {
            if (!s.val() || s.val().status !== "ativo") {
                document.body.innerHTML = '<div style="text-align:center; padding:100px; color:red;"><h1>LICEN√áA REVOGADA</h1></div>';
            }
        });
    }

    // THEME ENGINE
    function toggleMode() {
        const d = document.documentElement;
        const isDark = d.getAttribute('data-theme') === 'dark';
        isDark ? d.removeAttribute('data-theme') : d.setAttribute('data-theme', 'dark');
    }

    // PDF ENGINE
    pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.4.120/pdf.worker.min.js';
    async function extractPDF(input) {
        const file = input.files[0];
        const reader = new FileReader();
        reader.onload = async function() {
            const typedarray = new Uint8Array(this.result);
            const pdf = await pdfjsLib.getDocument(typedarray).promise;
            let text = "";
            for (let i = 1; i <= pdf.numPages; i++) {
                const page = await pdf.getPage(i);
                const content = await page.getTextContent();
                text += content.items.map(s => s.str).join(" ");
            }
            document.getElementById('corpus').value = text;
            alert("PDF Importado com Sucesso!");
        };
        reader.readAsArrayBuffer(file);
    }

    function runV8() {
        const p = document.getElementById('persona').value || "Especialista";
        const o = document.getElementById('objetivo').value || "Resultado T√©cnico";
        const c = document.getElementById('corpus').value;

        if(!c) return alert("Erro: Corpus vazio.");

        const finalPrompt = `[C√ÅSSIA PROMPT V8 - SINGULARITY ENTERPRISE]
PERSONA: ${p}. 
OBJETIVO: ${o}.

[PROTOCOLOS R√çGIDOS]
- PROIBIDO: Prolixidade, sauda√ß√µes ou "babozeiras" educadas. 
- ZERO ALUCINA√á√ÉO: N√£o invente fatos. Use apenas o corpus abaixo.
- LACUNAS: Se faltar informa√ß√£o, escreva "[DADO AUSENTE]".
- T√âCNICA: V√° direto ao ponto jur√≠dico.

CORPUS:
"${c}"`;

        document.getElementById('result').innerText = finalPrompt;
        document.getElementById('outputArea').style.display = 'block';
    }

    function copyResult() {
        navigator.clipboard.writeText(document.getElementById('result').innerText);
        alert("Script Copiado!");
    }
</script>
</body>
</html>
