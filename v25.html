<script>
    function checkAccess() {
        const params = new URLSearchParams(window.location.search);
        const id = params.get('id');
        const displayLicenca = document.getElementById('licenciado-para');

        // 1. REGRA HELEN CRISTINA (ESTÁTICA)
        if (id === "Helen_cristina") {
            document.getElementById('main-app').style.display = 'block';
            displayLicenca.innerText = "LICENCIADO PARA: HELEN CRISTINA";
            return;
        }

        // 2. REGRA PARA DOUTORA NATALIA (ADICIONADA DIRETO NO CÓDIGO PARA NÃO DAR ERRO)
        if (id === "Natalia" || id === "Dra_Natalia") {
            document.getElementById('main-app').style.display = 'block';
            displayLicenca.innerText = "LICENCIADO PARA: DRA. NATALIA";
            return;
        }

        // 3. REGRA GERAL DE ACESSOS ATIVOS (LOCALSTORAGE)
        const ativos = JSON.parse(localStorage.getItem('v8_acessos_ativos')) || [];
        const usuarioAtivo = ativos.find(acc => acc.id === id);

        if (usuarioAtivo) {
            document.getElementById('main-app').style.display = 'block';
            displayLicenca.innerText = "LICENCIADO PARA: " + usuarioAtivo.nome.toUpperCase();
        } else {
            // Se não encontrar o ID, bloqueia
            document.getElementById('main-app').style.display = 'none';
            document.getElementById('access-denied').style.display = 'flex';
        }
    }

    // Mantenha as outras funções (monitorar, processar, gerarPrompt, limparMemoria, copiar) iguais.
    // ... (restante do código anterior) ...

    checkAccess();
</script>
